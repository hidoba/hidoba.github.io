<script type="text/javascript">
(function(c,h,m,j){function k(a,b){this.element=a;this.options=c.extend({},l,b);this._defaults=l;this._name=g;this._ignoreHashChange=!1;this.init()}var g="curtain",l={scrollSpeed:400,bodyHeight:0,linksArray:[],mobile:!1,scrollButtons:{},controls:null,curtainLinks:".curtain-links",enableKeys:!0,easing:"swing",disabled:!1,nextSlide:function(){},prevSlide:function(){}};k.prototype={init:function(){var a=this;this.$element=c(this.element);this.$li=c(this.element).find(">li");this.$liLength=this.$li.length;
a.$windowHeight=c(h).height();a.$elDatas={};a.$document=c(m);a.$window=c(h);a.webkit=-1<navigator.userAgent.indexOf("Chrome")||-1<navigator.userAgent.indexOf("Safari");c.Android=navigator.userAgent.match(/Android/i);c.iPhone=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i);c.iPad=navigator.userAgent.match(/iPad/i);c.iOs4=/OS [1-4]_[0-9_]+ like Mac OS X/i.test(navigator.userAgent);if(c.iPhone||c.iPad||c.Android||a.options.disabled)this.options.mobile=!0,this.$li.css({position:"relative"}),
this.$element.find(".fixed").css({position:"absolute"});this.scrollEl=this.options.mobile?this.$element:c.browser.mozilla||c.browser.msie?c("html"):c("body");if(a.options.controls&&(a.options.scrollButtons.up=c(a.options.controls).find('[href="#up"]'),a.options.scrollButtons.down=c(a.options.controls).find('[href="#down"]'),!c.iOs4&&(c.iPhone||c.iPad)))a.$element.css({position:"fixed",top:0,left:0,right:0,bottom:0,"-webkit-overflow-scrolling":"touch",overflow:"auto"}),c(a.options.controls).css({position:"absolute"});
var b=function(){a.setDimensions();a.$li.eq(0).addClass("current");a.setCache();a.options.mobile||a.$li.eq(1).length&&a.$li.eq(1).nextAll().addClass("hidden");a.setEvents();a.setLinks();a.isHashIsOnList(location.hash.substring(1))};a.$element.find("img").length?a.imageLoaded(b):b()},scrollToPosition:function(a){var b=null;if(this.scrollEl.is(":animated"))return!1;if("up"===a||"down"==a){var e="up"===a?this.$current.prev():this.$current.next();this.$step&&(this.$current.find(".current-step").length||
this.$step.eq(0).addClass("current-step"),a="up"===a?this.$current.find(".current-step").prev(".step"):this.$current.find(".current-step").next(".step"),a.length&&(b=a.position().top+this.$elDatas[this.$current.index()]["data-position"]));b=b||(this.$elDatas[e.index()]===j?null:this.$elDatas[e.index()]["data-position"]);null!==b&&this.scrollEl.animate({scrollTop:b},this.options.scrollSpeed,this.options.easing)}else"top"===a?this.scrollEl.animate({scrollTop:0},this.options.scrollSpeed,this.options.easing):
"bottom"===a?this.scrollEl.animate({scrollTop:this.options.bodyHeight},this.options.scrollSpeed,this.options.easing):(b=c("#"+a).index(),e=Math.abs(this.currentIndex-b)*4*this.options.scrollSpeed/this.$liLength,this.scrollEl.animate({scrollTop:this.$elDatas[b]["data-position"]||null},e<=this.options.scrollSpeed?this.options.scrollSpeed:e,this.options.easing))},scrollEvent:function(){var a=this,b=a.$document.scrollTop();b<a.currentP&&0<a.currentIndex?(a._ignoreHashChange=!0,a.$current.prev().attr("id")&&
a.setHash(a.$current.prev().attr("id")),a.$current.removeClass("current").css(a.webkit?{"-webkit-transform":"translateY(0px) translateZ(0)"}:{marginTop:0}).nextAll().addClass("hidden").end().prev().addClass("current").removeClass("hidden"),a.setCache(),a.options.prevSlide()):b<a.currentP+a.currentHeight?(a.webkit?a.$current.css({"-webkit-transform":"translateY("+-(b-a.currentP)+"px) translateZ(0)"}):a.$current.css({marginTop:-(b-a.currentP)}),a.$fixedLength&&(parseInt(a.$fixed.attr("data-top"),10),
b+a.$windowHeight>=a.currentP+a.currentHeight?a.$fixed.css({position:"fixed"}):a.$fixed.css({position:"absolute",marginTop:Math.abs(b-a.currentP)})),a.$stepLength&&c.each(a.$step,function(e,d){if(c(d).position().top+a.currentP<=b+5&&c(d).position().top+a.currentP+c(d).height()>=b+5&&!c(d).hasClass("current-step"))return a.$step.removeClass("current-step"),c(d).addClass("current-step"),!1}),a.parallaxBg&&a.$current.css({"background-position-y":b*a.parallaxBg}),a.$fade.length&&a.$fade.css({opacity:1-
b/a.$fade.attr("data-fade")}),a.$slowScroll.length&&a.$slowScroll.css({"margin-top":b/a.$slowScroll.attr("data-slow-scroll")})):(a._ignoreHashChange=!0,a.$current.next().attr("id")&&a.setHash(a.$current.next().attr("id")),a.$current.removeClass("current").addClass("hidden").next("li").addClass("current").next("li").removeClass("hidden"),a.setCache(),a.options.nextSlide())},scrollMobileEvent:function(){var a=this,b=a.$element.scrollTop();b+10<a.currentP&&0<a.currentIndex?(a._ignoreHashChange=!0,a.$current.prev().attr("id")&&
a.setHash(a.$current.prev().attr("id")),a.$current.removeClass("current").prev().addClass("current"),a.setCache(),a.options.prevSlide()):b+10<a.currentP+a.currentHeight?a.$stepLength&&c.each(a.$step,function(e,d){c(d).position().top+a.currentP<=b&&c(d).position().top+a.currentP+c(d).outerHeight()>=b&&!c(d).hasClass("current-step")&&(a.$step.removeClass("current-step"),c(d).addClass("current-step"))}):(a._ignoreHashChange=!0,a.$current.next().attr("id")&&a.setHash(a.$current.next().attr("id")),a.$current.removeClass("current").next().addClass("current"),
a.setCache(),a.options.nextSlide())},setDimensions:function(){var a=this,b=0,e=!1,d=null;a.$windowHeight=a.$window.height();this.$li.each(function(g){var f=c(this);(e=f.hasClass("cover"))?(f.css({height:a.$windowHeight,zIndex:999-g}).attr("data-height",a.$windowHeight).attr("data-position",b),a.$elDatas[f.index()]={"data-height":parseInt(a.$windowHeight,10),"data-position":parseInt(b,10)},b+=a.$windowHeight):(d=f.outerHeight()<=a.$windowHeight?a.$windowHeight:f.outerHeight(),f.css({minHeight:d,zIndex:999-
g}).attr("data-height",d).attr("data-position",b),a.$elDatas[f.index()]={"data-height":parseInt(d,10),"data-position":parseInt(b,10)},b+=d);f.find(".fixed").length&&(g=f.find(".fixed").css("top"),f.find(".fixed").attr("data-top",g))});this.options.mobile||this.setBodyHeight()},setEvents:function(){var a=this;c(h).on("resize",function(){a.setDimensions()});if(a.options.mobile)a.$element.on("scroll",function(){a.scrollMobileEvent()});else a.$window.on("scroll",function(){a.scrollEvent()});if(a.options.enableKeys)a.$document.on("keydown",
function(b){if(38===b.keyCode||37===b.keyCode)return a.scrollToPosition("up"),b.preventDefault(),!1;if(40===b.keyCode||39===b.keyCode)return a.scrollToPosition("down"),b.preventDefault(),!1;if(36===b.keyCode)return a.scrollToPosition("top"),b.preventDefault(),!1;if(35===b.keyCode)return a.scrollToPosition("bottom"),b.preventDefault(),!1});if(a.options.scrollButtons){if(a.options.scrollButtons.up)a.options.scrollButtons.up.on("click",function(b){b.preventDefault();a.scrollToPosition("up")});if(a.options.scrollButtons.down)a.options.scrollButtons.down.on("click",
function(b){b.preventDefault();a.scrollToPosition("down")})}if(a.options.curtainLinks)c(a.options.curtainLinks).on("click",function(b){b.preventDefault();b=c(this).attr("href");if(!a.isHashIsOnList(b.substring(1))&&e)return!1;var e=a.$elDatas[c(b).index()]["data-position"]||null;e&&a.scrollEl.animate({scrollTop:e},a.options.scrollSpeed,a.options.easing);return!1});a.$window.on("hashchange",function(){!1===a._ignoreHashChange&&a.isHashIsOnList(location.hash.substring(1));a._ignoreHashChange=!1})},
setBodyHeight:function(){var a=0,b;for(b in this.$elDatas)a+=this.$elDatas[b]["data-height"];this.options.bodyHeight=a;c("body").height(a)},setLinks:function(){var a=this;this.$li.each(function(){var b=c(this).attr("id")||0;a.options.linksArray.push(b)})},setHash:function(a){el=c("[href=#"+a+"]");el.parent().siblings("li").removeClass("active");el.parent().addClass("active");history.pushState?history.pushState(null,null,"#"+a):location.hash=a},setCache:function(){this.$current=this.$element.find(".current");
this.$fixed=this.$current.find(".fixed");this.$fixedLength=this.$fixed.length;this.$step=this.$current.find(".step");this.$stepLength=this.$step.length;this.currentIndex=this.$current.index();this.currentP=this.$elDatas[this.currentIndex]["data-position"];this.currentHeight=this.$elDatas[this.currentIndex]["data-height"];this.parallaxBg=this.$current.attr("data-parallax-background");this.$fade=this.$current.find("[data-fade]");this.$slowScroll=this.$current.find("[data-slow-scroll]")},isHashIsOnList:function(a){var b=
this;c.each(b.options.linksArray,function(c,d){if(d===a)return b.scrollToPosition(a),!1})},readyElement:function(a,b){var c=setInterval(function(){a.length&&(b(a.length),clearInterval(c))},60)},imageLoaded:function(a){var b=this.$element.find("img"),e=b.length;b.bind("load.imgloaded",function(){if(0>=--e&&"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="!==this.src||c(this).not(":visible"))b.unbind("load.imgloaded"),a.call(b,this)}).each(function(){if(this.complete||this.complete===
j){var a=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.src=a}})}};c.fn[g]=function(a){return this.each(function(){c.data(this,"plugin_"+g)||c.data(this,"plugin_"+g,new k(this,a))})}})(jQuery,window,document);
    $(function(){
       $('.curtains').curtain({
           scrollSpeed: 300,
           controls: '.menu',
           curtainLinks: '.curtain-links',
           nextSlide: function(){
            //console.log("ok");
           }
       });
    });
</script>